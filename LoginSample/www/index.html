<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0; user-scalable=no" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
        
    <!-- Include cordova. -->
	<script src="cordova-2.3.0.js"></script>

    <!-- Include cordova plugins -->
    <script src="cordova.force.js"></script>


    <script>

    document.addEventListener("deviceready", onDeviceReady,false);

    // When this function is called, Cordova has been initialized and is ready to roll 
    function onDeviceReady() {
        alert("Cordova ready. Enabling the login to salesforce button.");
        
        // Enable the "Login to salesforce" button
        document.querySelector('button').style.display = "block";
    }
    
    function authenticateUser() {
        
        //Call getAuthCredentials to get the initial session credentials
        cordova.require("salesforce/plugin/oauth").getAuthCredentials(salesforceSessionRefreshed, getAuthCredentialsError);
    }
        

    function salesforceSessionRefreshed(creds) {
        alert('Login Successful: ' + JSON.stringify(creds));
        
        // Hide the "Login to salesforce" button
        document.querySelector('button').style.display = "none";
    }

    function getAuthCredentialsError(error) {
        alert('Login failed');
    }
        
    </script>

  </head>
  <body>
     <div>
         <button style="font-size: 20px; display: none;" onClick="authenticateUser();">Login to Salesforce</button>
     </div>
  </body>
</html>
